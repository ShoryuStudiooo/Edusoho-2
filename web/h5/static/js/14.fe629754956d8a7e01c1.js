webpackJsonp([14],{"8yuw":function(t,e){},SOOt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),a=i.n(s),n=(i("eqfM"),i("/QYm")),r=i("Gu7T"),c=i.n(r),o=i("oHlh"),l=i("gyMJ"),v={components:{eCourse:o.a},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},created:function(){},methods:{onLoad:function(){var s=this,t={offset:this.offset};l.a.getMyOrder({params:t}).then(function(t){var e=t.data,i=t.paging;s.isFirstRequestCompile=!0,s.list=[].concat(c()(s.list),c()(e)),s.offset=s.list.length,s.list.length==i.total&&(s.finished=!0),s.loading=!1}).catch(function(t){n.a.fail(t.message),s.isFirstRequestCompile=!0,s.loading=!1})}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"orders"},[0===e.list.length&&e.isFirstRequestCompile?i("div",{staticClass:"orders-container__empty"},[i("img",{attrs:{src:"static/images/orderEmpty.png"}}),e._v(" "),i("span",[e._v("暂无订单记录")])]):i("div",{staticClass:"order"},[i("van-list",{staticClass:"tab-list",attrs:{finished:e.finished},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,function(t){return i("e-course",{key:t.id,attrs:{order:t,type:"order",typeList:t.targetType}})}))],1)])},staticRenderFns:[]},d=i("VU/8")(v,u,!1,null,null,null).exports,p=i("NyOD"),m={cut:"砍价",groupon:"拼团",seckill:"秒杀"},_={cut:"砍",groupon:"团",seckill:"秒"},g={successed:"成功",ongoing:"中",failed:"失败"},f={name:"activity-item",props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{type2symbol:_,type2label:m,status2label:g,activityId:Number(this.activity.activityId)}},mixins:[p.a],methods:{viewDetail:function(t){}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"marketing-groupon activity-cell",on:{click:e.viewDetail}},[i("div",{staticClass:"activity-cell__head"},[i("span",{staticClass:"head-left",class:e.activity.type},[e._v(e._s(e.type2symbol[e.activity.type]))]),e._v(" "),i("span",{staticClass:"head-right",class:e.activity.status},[e._v(e._s(e.type2label[e.activity.type]+e.status2label[e.activity.status]))])]),e._v(" "),i("div",{staticClass:"activity-cell__body",on:{click:function(t){e.activityHandle(e.activityId)}}},[i("div",{staticClass:"marketing-groupon__image-container",class:{"marketing-groupon__image-empty":!e.activity.cover}},[e.activity.cover?i("img",{staticClass:"marketing-groupon__image",attrs:{src:e.activity.cover}}):e._e()]),e._v(" "),i("div",{staticClass:"marketing-groupon__context e-groupon__context"},[i("div",{staticClass:"context-title text-overflow"},[e._v(e._s(e.activity.name))]),e._v(" "),i("div",{staticClass:"context-sale"},[e.activity.price?i("span",{staticClass:"context-sale__sale-price"},[e._v(e._s(e.activity.price)+"元")]):e._e(),e._v(" "),e.activity.originPrice?i("span",{staticClass:"context-sale__origin-price"},[e._v(e._s(e.activity.originPrice)+"元")]):e._e(),e._v(" "),i("span",{staticClass:"context-sale__shopping"},[e._v(e._s(e.type2label[e.activity.type])+"详情")])])])])])},staticRenderFns:[]};var h={components:{activityItem:i("VU/8")(f,y,!1,function(t){i("8yuw")},"data-v-50ebb6cc",null).exports},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var s=this,t={offset:this.offset};l.a.myActivities({params:t}).then(function(t){var e=t.data,i=t.paging;s.isFirstRequestCompile=!0,s.list=[].concat(c()(s.list),c()(e)),s.offset=s.list.length,s.list.length==i.total&&(s.finished=!0),s.loading=!1}).catch(function(t){n.a.fail(t.message),s.isFirstRequestCompile=!0,s.loading=!1})}}},C={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"orders"},[0===e.list.length&&e.isFirstRequestCompile?i("div",{staticClass:"orders-container__empty"},[i("img",{attrs:{src:"static/images/orderEmpty.png"}}),e._v(" "),i("span",[e._v("暂无活动记录")])]):i("div",{staticClass:"activity"},[i("van-list",{staticClass:"tab-list",attrs:{finished:e.finished},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,function(t,e){return i("activity-item",{key:e,attrs:{activity:t}})}))],1)])},staticRenderFns:[]},x=i("VU/8")(h,C,!1,null,null,null).exports,b=i("NYxO"),k={computed:a()({},Object(b.mapState)(["user","vipSwitch"]),{vipDated:function(){return!!this.user.vip&&new Date(this.user.vip.deadline).getTime()<(new Date).getTime()}}),created:function(){this.getUserInfo()},methods:a()({},Object(b.mapActions)(["getUserInfo"]))},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user"},[i("div",{staticClass:"user-section clearfix"},[i("router-link",{attrs:{to:"/settings"}},[t.user.avatar?i("img",{staticClass:"user-img",attrs:{src:t.user.avatar.large}}):t._e()]),t._v(" "),i("div",{class:["user-middle",t.vipSwitch?"":"single-middle"]},[i("div",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))]),t._v(" "),t.vipSwitch?i("div",[t.user.vip?i("span",{staticClass:"user-vip"},[i("router-link",{attrs:{to:{path:"/vip",query:{id:t.user.vip.levelId}}}},[i("img",{class:["vip-img",t.vipDated?"vip-expired":""],attrs:{src:t.user.vip.icon}}),t._v(" "),t.vipDated?i("span",{staticClass:"grey text-overflow vip-name"},[t._v(t._s(t.user.vip.vipName)+"已过期，"),i("span",{staticClass:"color-primary"},[t._v("重新开通")])]):i("span",{staticClass:"color-primary"},[t._v(t._s(t.user.vip.vipName))])])],1):i("div",[i("router-link",{staticClass:"user-vip",attrs:{to:"/vip"}},[t._v("\n            您还不是会员，"),i("span",{staticClass:"color-primary"},[t._v("去开通")])])],1)]):t._e()]),t._v(" "),i("router-link",{staticClass:"user-setting",attrs:{to:"/settings"}},[i("img",{attrs:{src:"static/images/setting.png"}})])],1)])},staticRenderFns:[]},I=i("VU/8")(k,w,!1,null,null,null).exports,R={mixins:[i("vzuq").a],components:{Orders:d,activity:x,User:I},data:function(){return{activeIndex:0,tabs:["我的订单","我的活动"],hasBusinessDrainage:!1}},computed:a()({},Object(b.mapState)({isLoading:function(t){return t.isLoading}})),created:function(){var e=this;setTimeout(function(){window.scrollTo(0,0)},100),l.a.hasPluginInstalled().then(function(t){e.hasBusinessDrainage=t.BusinessDrainage})}},q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isLoading?i("e-loading"):e._e(),e._v(" "),i("user"),e._v(" "),i("router-link",{attrs:{to:{name:"couponCovert"}}},[e.hasBusinessDrainage?i("div",{staticClass:"coupon-code-entrance"},[e._v("兑换卡券\n      "),i("i",{staticClass:"van-icon van-icon-arrow pull-right"})]):e._e()]),e._v(" "),i("van-tabs",{staticClass:"after-tabs e-learn",model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},e._l(e.tabs,function(t,e){return i("van-tab",{key:e,attrs:{title:t}})})),e._v(" "),i("orders",{directives:[{name:"show",rawName:"v-show",value:0===e.activeIndex,expression:"activeIndex === 0"}]}),e._v(" "),i("activity",{directives:[{name:"show",rawName:"v-show",value:1===e.activeIndex,expression:"activeIndex === 1"}]})],1)},staticRenderFns:[]},D=i("VU/8")(R,q,!1,null,null,null);e.default=D.exports},vzuq:function(t,e,i){"use strict";var s=i("IcnI");e.a={beforeRouteEnter:function(t,e,i){!s.a.state.token?i({name:"prelogin",query:{redirect:t.fullPath}}):i()}}}});