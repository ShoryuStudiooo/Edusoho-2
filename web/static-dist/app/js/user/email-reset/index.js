webpackJsonp(["app/js/user/email-reset/index"],{"013c192aad0c33a0f8a5":function(e,t,a){"use strict";var n=a("d69bf8068ab8ba1f8cc0");new(function(e){return e&&e.__esModule?e:{default:e}}(n).default)},"2d54b0801acfe6b5b5d9":function(e,t,a){e.exports={default:a("7ef299c1fdb884750de8"),__esModule:!0}},"5a1b42cd4752706663d8":function(e,t,a){"use strict";var n=a("30373b8543ac2ca8f199"),r=a("4373c1ac6d15a5b2dd1f");e.exports=function(e,t,a){t in e?n.f(e,t,r(0,a)):e[t]=a}},"7a079e57c8ffba47bbed":function(e,t,a){"use strict";t.__esModule=!0;var n=a("2d54b0801acfe6b5b5d9"),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,r.default)(e)}},"7ef299c1fdb884750de8":function(e,t,a){a("9f5e733705cd16698cdf"),a("dfa37eb698c113f70efb"),e.exports=a("99ec8b6ce9e8b820539a").Array.from},bbc0ef257199acca9fed:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a("7a079e57c8ffba47bbed"),i=n(r),s=a("6415c664294d747ee392"),c=n(s),d=a("adc6e7d88332518aa1ec"),o=n(d),u=a("cd078759ac479d74803f"),f=n(u),l=a("7ab4a89ebadbfdecc2bf"),g=n(l),h=a("4602c3f5fe7ad9e3e91d"),b=n(h),v=a("1ff717687cc04d94af8f"),p=n(v),m=a("3b1883fc74dc0f9509af"),k=n(m),y=a("5eb223de522186da1dd9"),C=n(y),_=a("9181c6995ae8c5c94b7a"),j=a("17c25dd7d9d2615bc1d9"),w=n(j),x=function(e){function t(e,a,n){(0,g.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return r.$element=e,r.$target=a,r.params={top:0,left:0,currentX:0,currentY:0,flag:!1,currentLeft:0,currentTop:0},r.data=(0,o.default)({times:2},n),r.dragCaptchaToken=null,r.init(),r}return(0,k.default)(t,e),(0,b.default)(t,[{key:"init",value:function(){this.initDragCaptcha(),this.getLocation(this.$element[0])}},{key:"initDragCaptcha",value:function(){var e=this,t=this;C.default.dragCaptcha.get({before:function(){$(".js-drag-img-mask").removeClass("hidden"),$(".js-jigsaw-bg").remove(),$(".js-jigsaw").attr("src",""),t.setCss(t.$element[0],"cursor","pointer"),t.resetLocation(t.$element[0],t.$target[0]),$('[name="dragCaptchaToken"]').val(""),t.initEvent()},data:this.data}).then(function(t){e.loadingImg(t.url,t.jigsaw),e.dragCaptchaToken=t.token})}},{key:"loadingImg",value:function(e,t){var a=new Image;a.src=e,a.className="js-jigsaw-bg drag-img__bg",a.onload=function(){$(".js-jigsaw-bg").length>0||($(a).prependTo(".js-drag-img"),$(".js-drag-img-mask").addClass("hidden"),$(".js-jigsaw").attr("src",t))}}},{key:"initEvent",value:function(){var e=this;this.unbindEvent();var t=$(document);this.$element.on("mousedown.drag.captcha touchstart.drag.captcha",function(t){e.startDrag(t)}),t.on("mouseup.drag.captcha touchend.drag.captcha",function(t){e.stopDrag(t)}),t.on("mousemove.drag.captcha touchmove.drag.captcha",function(t){e.dragMove(t)})}},{key:"unbindEvent",value:function(){this.$element.unbind("mousedown.drag.captcha touchstart.drag.captcha"),$(document).unbind("mousemove.drag.captcha touchmove.drag.captcha mouseup.drag.captcha touchend.drag.captcha")}},{key:"startDrag",value:function(e){e.preventDefault();var t=this.params;t.flag=!0;var a=e.clientX?e.clientX.toFixed(2):e.originalEvent.targetTouches[0].pageX.toFixed(2);t.currentX=a}},{key:"stopDrag",value:function(e){var t=this,a=this.$element,n=(this.$target,this.params);if(n.flag&&(n.flag=!1,this.getLocation(a[0]),n.currentLeft)){var r=$(".js-jigsaw-bg"),i=this.calPositionX(r),s=this._getToken(this.dragCaptchaToken,i),c={token:s};C.default.dragCaptcha.validate({params:c}).then(function(e){t.validateSuccess(a[0],s)}).catch(function(){t.initDragCaptcha(),t.emit("error")})}}},{key:"dragMove",value:function(e){var t=this.$element,a=this.$target,n=this.params;if(n.flag){e.preventDefault();var r=e.clientX?e.clientX.toFixed(2):e.originalEvent.targetTouches[0].pageX.toFixed(2),i=r-n.currentX,s=t.parent().width()-t.width(),c=parseInt(n.left)+i;c<=0&&(c=0),c>=s&&(c=s),n.currentLeft=c;var d=c+"px";this.setCss(t[0],"left",d),this.setCss(a[0],"left",d),this.setCss(t[0],"cursor","move"),$(".js-drag-bar-tip").addClass("hidden");var o=c+20+"px";$(".js-drag-bar-mask").css("width",o)}}},{key:"calPositionX",value:function(e){var t=(e[0].naturalWidth/e.width()).toFixed(2);return(this.params.currentLeft.toFixed(2)*t).toFixed(2)}},{key:"validateSuccess",value:function(e,t){cd.message({type:"success",message:Translator.trans("validate.success")});var a=$('[name="dragCaptchaToken"]');a.val(t);var n=a.closest(".form-group");n.removeClass("has-error"),n.find(".jq-validate-error").remove(),this.unbindEvent(),this.setCss(e,"cursor","not-allowed"),this.emit("success",{token:t})}},{key:"getLocation",value:function(e){"auto"!==this.getCss(e,"left")&&(this.params.left=this.getCss(e,"left"))}},{key:"resetLocation",value:function(e,t){this.setCss(e,"left","0px"),this.setCss(t,"left","0px"),this.getLocation(e),$(".js-drag-bar-mask").css("width","0px"),$(".js-drag-bar-tip").removeClass("hidden")}},{key:"getCss",value:function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]}},{key:"setCss",value:function(e,t,a){e.style[t]=a}},{key:"_getToken",value:function(e,t){var a={token:e,captcha:t};return e=(0,c.default)(a),[].concat((0,i.default)((0,_.strToBase64)(e))).reverse().join("")}}]),t}(w.default);t.default=x},d69bf8068ab8ba1f8cc0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a("7ab4a89ebadbfdecc2bf"),i=n(r),s=a("4602c3f5fe7ad9e3e91d"),c=n(s),d=a("bbc0ef257199acca9fed"),o=n(d),u=function(){function e(){(0,i.default)(this,e),this.drag=$("#drag-btn").length?new o.default($("#drag-btn"),$(".js-jigsaw"),{limitType:"web_register"}):null,this.container=$("#reset-email-form"),this.btn=$("#next-btn"),this.initValidator(),this.init()}return(0,c.default)(e,[{key:"init",value:function(){var e=this;e.btn.click(function(){e.validator.form()&&($btn.button("loadding"),e.container.submit())})}},{key:"initValidator",value:function(){var e=this;this.validator=e.container.validate({rules:{email:{required:!0,es_email:!0,es_remote:{type:"get"}},password:{required:!0,minlength:5,maxlength:20},dragCaptchaToken:{required:!0}},messages:{dragCaptchaToken:{required:Translator.trans("auth.register.drag_captcha_tips")}}})}}]),e}();t.default=u},dfa37eb698c113f70efb:function(e,t,a){"use strict";var n=a("a0ce7130a92293994282"),r=a("d30516674aade65150d3"),i=a("68be1979658d3a49fbce"),s=a("be5ff68e5fc2b36ab3fd"),c=a("7bbcd029dba3160182ef"),d=a("10f5bc3e6ad5971b57b0"),o=a("5a1b42cd4752706663d8"),u=a("a5b03ec781f71e8d0bed");r(r.S+r.F*!a("9192d99c20a30ab204d7")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,r,f,l=i(e),g="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,v=void 0!==b,p=0,m=u(l);if(v&&(b=n(b,h>2?arguments[2]:void 0,2)),void 0==m||g==Array&&c(m))for(t=d(l.length),a=new g(t);t>p;p++)o(a,p,v?b(l[p],p):l[p]);else for(f=m.call(l),a=new g;!(r=f.next()).done;p++)o(a,p,v?s(f,b,[r.value,p],!0):r.value);return a.length=p,a}})}},["013c192aad0c33a0f8a5"]);